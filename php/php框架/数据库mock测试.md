# 测试主要背景
* 测试分为很多目录,目录下面还有很多目录,
* 测试的基本单元是类和测试函数
* 在一个测试类(TestCase)里面有一个数据库mock
* 在一个测试类的测试函数里面进行实际的测试.
* 在测试过程中,全部测试数据都是固定的,不会变化,(变化会带来更多bug)
* 一般只进行api测试,集成测试.不会直接测试php类,(后端换种语言貌似也能测试....)

# 目前流程
* mock数据库,向数据库中写入已知的数据
* 搭建测试对象的运行环境:重置cookie,登录,购买东西....
* 调用ajax运行项目代码,验证返回数据
* 验证调用ajax后的数据数据0

# 主要问题
* 运行时间比较长
* 测试代码依赖特别多,测试后台监视订单,依赖登录,前台购买,
* mock数据特别复杂,每次运行会mock10几张表...基本不能手写数据库mock表...

# 解决方案
## 解耦
* 使用基于类的mock,而不是基于数据的mock
* 还是要做集成测试...
* 测试运行速度会很快
* 更容易找到错误
* 修改需求时,修改测试更容易

## 将测试封装更好....
* 分离概念
* 更高抽象层次的测试代码
* OOP方法
* 设计模式
* 分组mock数据库,有些数据库的数据是环境,总是不会变.
* 使用依赖注入思想,分离每一项测试的依赖(编译),然后在测试开始全部mock
* 目前测试代码的封装应该比产品代码的封装更好...
* 不容易找到错误...
* 后果:测试运行速度会更慢...某些方法可能可以加快速度

# 具体设计
## 结构化数据库mock实现
* mock